{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 1df30839dfddb52bac07","webpack:///./src/app/stats.js","webpack:///./src/app/gwas-credible-sets.js","webpack:///./src/app/scoring.js","webpack:///./src/app/marking.js"],"names":["ninv","p","SPLIT1","SPLIT2","CONST1","CONST2","a","b","c","d","e","f","q","r","x","Math","abs","sqrt","log","rollup","scoring","stats","marking","_nlogp_to_z2","nlogp","pow","bayesFactors","nlogpvals","cap","Array","isArray","length","z2_2","map","item","capValue","max","exp","normalizeProbabilities","scores","sumValues","reduce","findCredibleSet","probs","cutoff","Number","isNaN","statsTotal","sortedStatsMap","index","sort","runningTotal","result","fill","i","value","score","markBoolean","credibleSetMembers","rescaleCredibleSet","sumMarkers"],"mappings":"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","file":"gwas-credible-sets.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"gwasCredibleSets\"] = factory();\n\telse\n\t\troot[\"gwasCredibleSets\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1df30839dfddb52bac07","/** \n * @module stats \n * @license MIT\n * */\n\n/**\n * The inverse of the standard normal CDF. May be used to determine the Z-score for the desired quantile.\n *\n * This is an implementation of algorithm AS241:\n *     https://www.jstor.org/stable/2347330\n * \n * @param {number} p The desired quantile of the standard normal distribution.\n * @returns {number}\n */\nfunction ninv(p) {\n    const SPLIT1 = 0.425;\n    const SPLIT2 = 5.0;\n    const CONST1 = 0.180625;\n    const CONST2 = 1.6;\n    const a = [\n        3.3871328727963666080E0,\n        1.3314166789178437745E2,\n        1.9715909503065514427E3,\n        1.3731693765509461125E4,\n        4.5921953931549871457E4,\n        6.7265770927008700853E4,\n        3.3430575583588128105E4,\n        2.5090809287301226727E3\n    ];\n\n    const b = [\n        4.2313330701600911252E1,\n        6.8718700749205790830E2,\n        5.3941960214247511077E3,\n        2.1213794301586595867E4,\n        3.9307895800092710610E4,\n        2.8729085735721942674E4,\n        5.2264952788528545610E3\n    ];\n\n    const c = [\n        1.42343711074968357734E0,\n        4.63033784615654529590E0,\n        5.76949722146069140550E0,\n        3.64784832476320460504E0,\n        1.27045825245236838258E0,\n        2.41780725177450611770E-1,\n        2.27238449892691845833E-2,\n        7.74545014278341407640E-4\n    ];\n\n    const d = [\n        2.05319162663775882187E0,\n        1.67638483018380384940E0,\n        6.89767334985100004550E-1,\n        1.48103976427480074590E-1,\n        1.51986665636164571966E-2,\n        5.47593808499534494600E-4,\n        1.05075007164441684324E-9\n    ];\n\n    const e = [\n        6.65790464350110377720E0,\n        5.46378491116411436990E0,\n        1.78482653991729133580E0,\n        2.96560571828504891230E-1,\n        2.65321895265761230930E-2,\n        1.24266094738807843860E-3,\n        2.71155556874348757815E-5,\n        2.01033439929228813265E-7\n    ];\n\n    const f = [\n        5.99832206555887937690E-1,\n        1.36929880922735805310E-1,\n        1.48753612908506148525E-2,\n        7.86869131145613259100E-4,\n        1.84631831751005468180E-5,\n        1.42151175831644588870E-7,\n        2.04426310338993978564E-15\n    ];\n\n    const q = p - 0.5;\n    let r, x;\n\n    if (Math.abs(q) < SPLIT1) {\n        r = CONST1 - q * q;\n        return q * ((((((( a[7] * r + a[6] ) * r + a[5] ) * r + a[4] ) * r\n            + a[3] ) * r + a[2] ) * r + a[1] ) * r + a[0] ) /\n            ((((((( b[6] * r + b[5] ) * r + b[4] ) * r + b[3] ) * r\n                + b[2] ) * r + b[1] ) * r + b[0] ) * r + 1.0 );\n    }\n    else {\n        if (q < 0) {\n            r = p\n        }\n        else {\n            r = 1.0 - p\n        }\n\n        if (r > 0) {\n            r = Math.sqrt(-Math.log(r));\n            if (r <= SPLIT2) {\n                r -= CONST2;\n                x = ((((((( c[7] * r + c[6] ) * r + c[5] ) * r + c[4] ) * r\n                    + c[3] ) * r + c[2] ) * r + c[1] ) * r + c[0] ) /\n                    ((((((( d[6] * r + d[5] ) * r + d[4] ) * r + d[3] ) * r\n                        + d[2] ) * r + d[1] ) * r + d[0] ) * r + 1.0 );\n            }\n            else {\n                r -= SPLIT2;\n                x = ((((((( e[7] * r + e[6] ) * r + e[5] ) * r + e[4] ) * r\n                    + e[3] ) * r + e[2] ) * r + e[1] ) * r + e[0] ) /\n                    ((((((( f[6] * r + f[5] ) * r + f[4] ) * r + f[3] ) * r\n                        + f[2] ) * r + f[1] ) * r + f[0] ) * r + 1.0 );\n            }\n        }\n        else {\n            throw('Not implemented')\n        }\n\n        if (q < 0) {\n            x = -x\n        }\n\n        return x;\n    }\n}\n\n// Hack: A single global object representing the contents of the module\nconst rollup = { ninv };\n\nexport { ninv };\nexport default rollup;\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/stats.js","/** \n * Functions for calculating credible sets and Bayes factors from\n * genome-wide association study (GWAS) results. \n * @module gwas-credible-sets \n * @license MIT\n */\n\nimport stats from './stats';\nimport scoring from './scoring';\nimport marking from './marking';\n\n// HACK: Because a primary audience is targets that do not have any module system, we will expose submodules from the\n//  top-level module. (by representing each sub-module as a \"rollup object\" that exposes its internal methods)\n// Then, submodules may be accessed as `window.gwasCredibleSets.stats`, etc\n\n// If you are using a real module system, please import from sub-modules directly- these global helpers are a bit of\n//  a hack and may go away in the future\nexport { scoring, stats, marking };\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/gwas-credible-sets.js","/** \n * @module scoring \n * @license MIT\n */\n\nimport { ninv } from './stats';\n\n\n/**\n * Convert a -log10 p-value to Z^2.\n *\n * Very large -log10 p-values (very small p-values) cannot be converted to a Z-statistic directly in the browser due to\n *  limitations in javascript (64-bit floats.) These values are handled using an approximation:\n *  for small p-values, Z_i^2 has a linear relationship with -log10 p-value.\n *\n *  The approximation begins for -log10 p-values >= 300.\n *\n * @param nlogp\n * @return {number}\n * @private\n */\nfunction _nlogp_to_z2(nlogp) {\n    const p = Math.pow(10, -nlogp);\n    if (nlogp < 300) {\n        // Use exact method when within the range of 64-bit floats (approx 10^-323)\n        return Math.pow(ninv(p / 2), 2);\n    }\n    else {\n        // For very small p-values, -log10(pval) and Z^2 have a linear relationship\n        // This avoids issues with needing higher precision floats when doing the calculation\n        // with ninv\n        return (4.59884133027944 * nlogp) - 5.88085867031722\n    }\n}\n\n/**\n * Calculate a Bayes factor exp(Z^2 / 2) based on p-values. If the Z-score is very large, the Bayes factors\n *  are calculated in an inexact (capped) manner that makes the calculation tractable but preserves comparisons.\n * @param {Number[]} nlogpvals An array of -log10(p-value) entries\n * @param {Boolean} [cap=true] Whether to apply an inexact method. If false, some values in the return array may\n *  be represented as \"Infinity\", but the Bayes factors will be directly calculated wherever possible.\n * @return {Number[]} An array of exp(Z^2 / 2) statistics\n */\nfunction bayesFactors(nlogpvals, cap=true) {\n    if (!Array.isArray(nlogpvals) || ! nlogpvals.length) {\n        throw 'Must provide a non-empty array of pvalues';\n    }\n\n    // 1. Convert the pvalues to Z^2 / 2 values. Divide by 2 before applying the cap, because it means fewer values will\n    //   need to be truncated. This does affect some of the raw bayes factors that are returned (when a cap is needed),\n    //   but the resulting credible set contents / posterior probabilities are unchanged.\n    let z2_2 = nlogpvals.map(item => _nlogp_to_z2(item) / 2);\n\n    // 2. Calculate bayes factor, using a truncation approach that prevents overrunning the max float64 value\n    //   (when Z^2 / 2 > 709 or so). As safeguard, we could (but currently don't) check that exp(Z^2 / 2) is not larger\n    //   than infinity.\n    if (cap) {\n        const capValue = Math.max(...z2_2) - 708; // The real cap is ~709; this should prevent any value from exceeding it\n        if (capValue > 0) {\n            z2_2 = z2_2.map(item => (item - capValue));\n        }\n    }\n    return z2_2.map(item => Math.exp(item));\n}\n\n/**\n * Normalize so that sum of all elements = 1.0. This method must be applied to bayes factors before calculating any\n *  credible set.\n *\n * @param {Number[]} scores An array of probability scores for all elements in the range\n * @returns {Number[]} Posterior probabilities\n */\nfunction normalizeProbabilities(scores) {\n    const sumValues = scores.reduce((a, b) => a + b, 0);\n    return scores.map(item => item / sumValues);\n}\n\nconst rollup = { bayesFactors, normalizeProbabilities };\nexport default rollup;\nexport { bayesFactors, normalizeProbabilities };\n\n// Export additional symbols for unit testing only (not part of public interface for the module)\nexport { _nlogp_to_z2 };\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/scoring.js","/**\n * @module marking\n * @license MIT\n */\n\n/**\n * Given an array of probabilities, determine which elements of the array fall within the X% credible set,\n *   where X is the cutoff value.\n *\n * @param {Number[]} probs Calculated probabilities used to rank the credible set. This method will normalize the\n *   provided input to ensure that the values sum to 1.0.\n * @param {Number} [cutoff=0.95] Keep taking items until we have accounted for >= this fraction of the total probability.\n *  For example, 0.95 would represent the 95% credible set.\n * @return {Number[]} An array with posterior probabilities (for the items in the credible set), and zero for all\n *   other elements. This array is the same length as the provided probabilities array.\n */\nfunction findCredibleSet(probs, cutoff=0.95) {\n    // Type checking\n    if (!Array.isArray(probs) || !probs.length) {\n        throw 'Probs must be a non-empty array';\n    }\n    if (!(typeof cutoff === 'number' ) || cutoff < 0 || cutoff > 1.0 || Number.isNaN(cutoff)) {\n        throw 'Cutoff must be a number between 0 and 1';\n    }\n\n    const statsTotal = probs.reduce((a, b) => a + b, 0);\n    if (statsTotal <= 0) {\n        throw 'Sum of provided probabilities must be > 0';\n    }\n\n    // Sort the probabilities by largest first, while preserving a map to original item order\n    const sortedStatsMap = probs\n        .map((item, index) => [item, index])\n        .sort((a, b) => (b[0] - a[0]));\n\n    let runningTotal = 0;\n    const result = new Array(sortedStatsMap.length).fill(0);\n    for (let i = 0; i < sortedStatsMap.length; i++) {\n        let [value, index] = sortedStatsMap[i];\n        if (runningTotal < cutoff) {\n            // Convert from a raw score to posterior probability by dividing the item under consideration\n            //  by sum of all probabilities.\n            const score = value / statsTotal;\n            result[index] = score;\n            runningTotal += score;\n        } else {\n            break;\n        }\n    }\n    return result;\n}\n\n/**\n * Given a numeric [pre-calculated credible set]{@link #findCredibleSet}, return an array of booleans where true\n *   denotes membership in the credible set.\n *\n * This is a helper method used when visualizing the members of the credible set by raw membership.\n *\n * @param {Number[]} credibleSetMembers An array indicating contributions to the credible set, where non-members are\n *  represented by some falsy value.\n * @return {Boolean[]} An array of booleans identifying whether or not each item is in the credible set.\n *  This array is the same length as the provided credible set array.\n */\nfunction markBoolean(credibleSetMembers) {\n    return credibleSetMembers.map(item => !!item);\n}\n\n/**\n * Visualization helper method for rescaling data to a predictable output range, eg when range for a color gradient\n *   must be specified in advance.\n *\n * Given an array of probabilities for items in a credible set, rescale the probabilities within only the credible\n *   set to their total sum.\n *\n * TODO: Better example?\n * Example for 95% credible set: [0.92, 0.06, 0.02] -> [0.938, 0.061, 0]. The first two elements here\n * belong to the credible set, the last element does not.\n *\n * @param {Number[]} credibleSetMembers Calculated probabilities used to rank the credible set.\n * @return {Number[]} The fraction of credible set probabilities each item accounts for.\n *  This array is the same length as the provided credible set.\n */\nfunction rescaleCredibleSet(credibleSetMembers) {\n    const sumMarkers = credibleSetMembers.reduce((a, b) => a + b, 0);\n    return credibleSetMembers.map(item => item / sumMarkers);\n}\n\nconst rollup = { findCredibleSet, markBoolean, rescaleCredibleSet };\nexport default rollup;\nexport { findCredibleSet, markBoolean, rescaleCredibleSet };\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/marking.js"],"sourceRoot":""}